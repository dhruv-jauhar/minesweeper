(this["webpackJsonpcreate-react-app"]=this["webpackJsonpcreate-react-app"]||[]).push([[0],{14:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),r=n(7),s=n.n(r),i=(n(6),n(8)),c=n(2),l=function(e,t,n){for(var a=[-1,0,1],o=0,r=0;r<3;r++)for(var s=0;s<3;s++)e+a[r]>=0&&e+a[r]<n.board.length&&t+a[s]>=0&&t+a[s]<n.board[0].length&&1===n.boardState[e+a[r]][t+a[s]]&&o++;if(o===n.board[e][t])for(r=0;r<3;r++)for(s=0;s<3;s++)e+a[r]>=0&&e+a[r]<n.board.length&&t+a[s]>=0&&t+a[s]<n.board[0].length&&0===n.boardState[e+a[r]][t+a[s]]&&d(e+a[r],t+a[s],n)},d=function(e,t,n){var a=n.boardState;a[e][t]=2,0===n.board[e][t]&&l(e,t,n);var o=n.hintState;o[e][t]=0,n.setHintState(o),"X"===n.board[e][t]&&function(e){e.setMessage("You lose!"),e.setRunTime(!1);for(var t=e.boardState,n=0;n<e.board.length;n++)for(var a=0;a<e.board[0].length;a++)"X"===e.board[n][a]&&(t[n][a]=2);e.setBoardState(t)}(n),n.setBoardState(a);for(var r=0,s=0;s<n.board.length;s++)for(var i=0;i<n.board[0].length;i++)2===a[s][i]&&r++;r===n.board.length*n.board[0].length-n.mines&&(n.setMessage("You won!\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0Grid: ".concat(n.board.length,"x").concat(n.board.length,"\xa0\xa0\xa0\xa0\xa0\xa0Mines: ").concat(n.mines,"\xa0\xa0\xa0\xa0\xa0\xa0Time: ").concat(n.time.toFixed(1),"s\xa0\xa0\xa0\xa0\xa0\xa0Hints Used: ").concat(n.hintCount)),n.setRunTime(!1))},b=function(e,t,n){var a=n.boardState;if(0===a[e][t]){if(n.flagCount===n.mines)return;a[e][t]=1,n.setFlagCount(n.flagCount+1)}else a[e][t]=0,n.setFlagCount(n.flagCount-1);var o=n.hintState;o[e][t]=0,n.setHintState(o),n.setBoardState(a)},u=function(e,t,n,a){if(0!==a.boardState[t][n]||"l"!==e||!1!==a.runTime||0!==a.time){if(!a.message.length)switch(a.boardState[t][n]){case 0:"l"===e?d(t,n,a):b(t,n,a);break;case 1:b(t,n,a);break;case 2:l(t,n,a);break;default:return}}else h(t,n,a)},h=function(e,t,n){var a,o=n.mines,r=n.board[0].length,s=n.board.length;do{a=m([s,r]);for(var i=0;i<Math.min(o,r*s);i++){for(var c=Math.floor(Math.random()*s*r);"X"===a[c%s][Math.floor(c/s)]||Math.abs(c%s-e)<2&&Math.abs(Math.floor(c/s)-t)<2;)c=Math.floor(Math.random()*s*r);a[c%s][Math.floor(c/s)]="X"}for(i=0;i<s;i++)for(var l=0;l<r;l++)if("X"!==a[i][l])for(var d=[-1,0,1],b=0;b<3;b++)for(var u=0;u<3;u++)i+d[b]>=0&&i+d[b]<s&&l+d[u]>=0&&l+d[u]<r&&"X"===a[i+d[b]][l+d[u]]&&a[i][l]++}while(!g(e,t,n,a));var h=n.boardState;f(h,e,t,a),n.setBoardState(h),n.setBoard(a),n.setRunTime(!0)};function f(e,t,n,a){if(e[t][n]=2,0===a[t][n])for(var o=[-1,0,1],r=0;r<3;r++)for(var s=0;s<3;s++)t+o[r]>=0&&t+o[r]<a.length&&n+o[s]>=0&&n+o[s]<a[0].length&&0===e[t+o[r]][n+o[s]]&&f(e,t+o[r],n+o[s],a)}function g(e,t,n,a){var o=m([n.board.length,n.board[0].length]);for(f(o,e,t,a);;){var r=0;for(e=0;e<n.board.length;e++)for(t=0;t<n.board[0].length;t++)if(2===o[e][t]){for(var s=[-1,0,1],i=0,c=0,l=0;l<3;l++)for(var d=0;d<3;d++)e+s[l]>=0&&e+s[l]<n.board.length&&t+s[d]>=0&&t+s[d]<n.board[0].length&&(1===o[e+s[l]][t+s[d]]&&i++,0===o[e+s[l]][t+s[d]]&&c++);if(i===a[e][t])for(l=0;l<3;l++)for(d=0;d<3;d++)e+s[l]>=0&&e+s[l]<n.board.length&&t+s[d]>=0&&t+s[d]<n.board[0].length&&0===o[e+s[l]][t+s[d]]&&(o[e+s[l]][t+s[d]]=2,r=1);if(c===a[e][t]-i&&c>0)for(l=0;l<3;l++)for(d=0;d<3;d++)e+s[l]>=0&&e+s[l]<n.board.length&&t+s[d]>=0&&t+s[d]<n.board[0].length&&0===o[e+s[l]][t+s[d]]&&(o[e+s[l]][t+s[d]]=1,r=1)}var b=0;for(e=0;e<n.board.length;e++)for(t=0;t<n.board[0].length;t++)1===o[e][t]&&b++;if(b===n.mines&&0===n.message.length)for(e=0;e<n.board.length;e++)for(t=0;t<n.board[0].length;t++)0===o[e][t]&&(o[e][t]=2,r=1);if(0===r)break}for(var u=0,h=0;h<n.board.length;h++)for(var g=0;g<n.board[0].length;g++)2===o[h][g]&&u++;return u===n.board.length*n.board[0].length-n.mines}function m(e){for(var t=[],n=0;n<e[0];++n)t.push(1===e.length?0:m(e.slice(1)));return t}function j(e,t,n){e=e||n.rows||10,t=t||n.cols||10,n.setBoard(m([t,e])),n.setBoardState(m([t,e])),n.setHintState(m([t,e])),n.setMessage(""),n.setFlagCount(0),n.setRunTime(!1),n.setHintCount(0),setTimeout((function(){return n.setTime(0)}),150)}function S(e){if(0!==e.time){for(var t=0,n=e.hintState,a=0;a<e.board.length;a++)for(var o=0;o<e.board[0].length;o++)1===e.boardState[a][o]&&"X"!=e.board[a][o]&&(n[a][o]=2,t=1);if(!t){for(var r=0;r<e.board.length;r++)for(var s=0;s<e.board[0].length;s++)if(2===e.boardState[r][s]){for(var i=[-1,0,1],c=0,l=0,d=0;d<3;d++)for(var b=0;b<3;b++)r+i[d]>=0&&r+i[d]<e.board.length&&s+i[b]>=0&&s+i[b]<e.board[0].length&&(1===e.boardState[r+i[d]][s+i[b]]&&c++,0===e.boardState[r+i[d]][s+i[b]]&&l++);if(c===e.board[r][s])for(d=0;d<3;d++)for(b=0;b<3;b++)r+i[d]>=0&&r+i[d]<e.board.length&&s+i[b]>=0&&s+i[b]<e.board[0].length&&0===e.boardState[r+i[d]][s+i[b]]&&(n[r+i[d]][s+i[b]]=1);if(l===e.board[r][s]-c&&l>0)for(d=0;d<3;d++)for(b=0;b<3;b++)r+i[d]>=0&&r+i[d]<e.board.length&&s+i[b]>=0&&s+i[b]<e.board[0].length&&0===e.boardState[r+i[d]][s+i[b]]&&(n[r+i[d]][s+i[b]]=2)}var u=0;for(r=0;r<e.board.length;r++)for(s=0;s<e.board[0].length;s++)1===e.boardState[r][s]&&u++;if(u===e.mines&&0===e.message.length)for(r=0;r<e.board.length;r++)for(s=0;s<e.board[0].length;s++)0===e.boardState[r][s]&&(n[r][s]=1);e.setHintCount(e.hintCount+1),e.setHintState(n)}}}var O=n(0),v=o.a.memo((function(e){var t=o.a.useState(!0),n=Object(c.a)(t,2),a=n[0],r=n[1],s=function(t,n,a){e.setRows(t),e.setCols(n),e.setMines(a),j(t,n,e)};return Object(O.jsxs)("div",{className:"settings",children:[!!e.board.length&&Object(O.jsx)("button",{className:"red",onClick:function(){return e.setShowNewGameSettings(!1)},children:"Back"}),Object(O.jsx)("button",{onClick:function(){return r(!a)},children:a?"Presets":"Custom"}),a?Object(O.jsxs)(o.a.Fragment,{children:[Object(O.jsx)("input",{type:"text",autoFocus:!0,id:"rowno",placeholder:"Enter rows",autoComplete:"off"}),Object(O.jsx)("input",{type:"text",id:"colno",placeholder:"Enter columns",autoComplete:"off"}),Object(O.jsx)("input",{type:"text",id:"bombno",placeholder:"Enter mines",autoComplete:"off"}),Object(O.jsx)("button",{className:"green",onClick:function(){var t=document.getElementById("rowno").value,n=document.getElementById("bombno").value,a=document.getElementById("colno").value;t>32?window.alert("Please limit rows to 32"):a>24?window.alert("Please limit columns to 24"):2.5*n>t*a?window.alert("Please limit mines to 40% of the board"):(t=t.length?parseInt(t):0,a=a.length?parseInt(a):0,n=n.length?parseInt(n):0,e.setRows(t||e.rows||10),e.setMines(n||e.mines||15),e.setCols(a||e.cols||10),j(t,a,e),e.setShowNewGameSettings(!1))},children:"Start"})]}):Object(O.jsxs)(o.a.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){r(!0),e.setShowNewGameSettings(!1),s(8,8,10)},children:"Easy - 8x8, 10"}),Object(O.jsx)("button",{onClick:function(){r(!a),e.setShowNewGameSettings(!1),s(16,16,40)},children:"Medium - 16x16, 40"}),Object(O.jsx)("button",{onClick:function(){r(!a),e.setShowNewGameSettings(!1),s(30,16,99)},children:"Hard - 30x16, 99"}),Object(O.jsx)("button",{onClick:function(){r(!a),e.setShowNewGameSettings(!1),s(30,24,200)},children:"Expert - 30x24, 200"})]})]})})),x=o.a.memo((function(e){return Object(O.jsxs)("div",{className:"settings",children:[Object(O.jsx)("button",{className:"red",onClick:function(){return j(e.rows,e.cols,e)},children:"Reset - ".concat(e.rows,"x").concat(e.cols)}),e.message.length?Object(O.jsx)("div",{className:"result",children:e.message}):Object(O.jsxs)(o.a.Fragment,{children:[Object(O.jsxs)("button",{onClick:function(){return e.setDoesClickOpen(!e.doesClickOpen)},children:[Object(O.jsx)("div",{className:"".concat(e.doesClickOpen),children:"\ud83d\udc80"}),Object(O.jsx)("div",{className:"".concat(!e.doesClickOpen),children:"\ud83d\udea9"})]}),Object(O.jsx)("div",{className:"count",children:Object(O.jsxs)(O.Fragment,{children:["\ud83d\udea9\u2007\u2007",e.flagCount,"\u2007/\u2007",e.mines]})}),Object(O.jsxs)("div",{className:"count",children:["\u23f1\u2007\u2007\u2007\u2007\u2007",e.time.toFixed(1)]}),Object(O.jsx)("button",{onClick:function(){return S(e)},children:"Hint"})]}),Object(O.jsx)("button",{className:"green",onClick:function(){return e.setShowNewGameSettings(!0)},children:"New Game"})]})})),C=o.a.memo((function(e){return o.a.useEffect((function(){return Object(i.a)(document.querySelectorAll(".tile")).forEach((function(e){return e.addEventListener("contextmenu",(function(e){return e.preventDefault(),!1}),!1)}))})),Object(O.jsx)("div",{className:"gameboard",children:e.board.map((function(t,n){return Object(O.jsx)("div",{className:"row",children:t.map((function(t,a){return Object(O.jsx)("div",{className:2===e.boardState[n][a]?"a".concat(e.board[n][a]):0===e.hintState[n][a]?"tile":"b".concat(e.hintState[n][a]),onClick:function(){return u(e.doesClickOpen?"l":"r",n,a,e)},onContextMenu:function(){return u(e.doesClickOpen?"r":"l",n,a,e),!1},children:2===e.boardState[n][a]?"X"===t?Object(O.jsx)(O.Fragment,{children:"\ud83d\udc80"}):t:1===e.boardState[n][a]&&Object(O.jsx)(O.Fragment,{children:"\ud83d\udea9"})},a)}))},n)}))})})),w=function(){var e=o.a.useState(0),t=Object(c.a)(e,2),n=t[0],a=t[1],r=o.a.useState(0),s=Object(c.a)(r,2),i=s[0],l=s[1],d=o.a.useState(0),b=Object(c.a)(d,2),u=b[0],h=b[1],f=o.a.useState(0),g=Object(c.a)(f,2),m=g[0],j=g[1],S=o.a.useState([]),w=Object(c.a)(S,2),p=w[0],k=w[1],N=o.a.useState(!1),M=Object(c.a)(N,2),y=M[0],B=M[1],T=o.a.useState(""),E=Object(c.a)(T,2),F=E[0],H=E[1],I=o.a.useState(0),R=Object(c.a)(I,2),G=R[0],X=R[1],L=o.a.useState([]),P=Object(c.a)(L,2),Y=P[0],A=P[1],D=o.a.useState(0),J=Object(c.a)(D,2),U=J[0],q=J[1],z=o.a.useState([]),W=Object(c.a)(z,2),K=W[0],Q=W[1],V=o.a.useState(!1),Z=Object(c.a)(V,2),$=Z[0],_=Z[1],ee=o.a.useState(!0),te=Object(c.a)(ee,2),ne=te[0],ae=te[1],oe=o.a.useState(!0),re=Object(c.a)(oe,2),se=re[0],ie=re[1];return document.addEventListener("visibilitychange",(function(){document.hidden?B(!1):B(!!(n>0&&0===F.length))})),o.a.useEffect((function(){var e=null;return y?e=setInterval((function(){a((function(e){return e+.1}))}),100):clearInterval(e),function(){clearInterval(e)}}),[y]),o.a.useEffect((function(){F.length&&ie(!1)}),[F]),Object(O.jsxs)("div",{className:"screen",children:[se?Object(O.jsx)(v,{rows:i,cols:u,mines:m,board:p,setRows:l,setCols:h,setTime:a,setMines:j,hintCount:U,setBoard:k,setRunTime:B,setMessage:H,setFlagCount:X,setHintCount:q,setHintState:A,setBoardState:Q,setShowNewGameSettings:ie}):Object(O.jsx)(x,{rows:i,cols:u,time:n,mines:m,board:p,setTime:a,message:F,setBoard:k,flagCount:G,hintState:Y,boardState:K,setRunTime:B,hintCount:U,setMessage:H,setFlagCount:X,doesClickOpen:ne,setHintCount:q,setHintState:A,setBoardState:Q,setDoesClickOpen:ae,setShowNewGameSettings:ie}),Object(O.jsx)(C,{time:n,mines:m,board:p,runTime:y,message:F,hintCount:U,setBoard:k,flagCount:G,hintState:Y,setRunTime:B,boardState:K,setMessage:H,setHintCount:q,setFlagCount:X,setHintState:A,setBoardState:Q,doesClickOpen:ne}),$&&Object(O.jsxs)("div",{className:"moreinfo",children:["Welcome to the last minesweeper you'll ever need! ",Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),"Using Artificial Intelligence, this game creates a random board that is guaranteed to be solvable, so you'll never lose a game because of a 50-50 guess.",Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),"You can customize the game dimensions to your liking or use the international standard presets. The default is 10x10 with 15 mines. Remember: if you add too many mines, the AI might not find a solvable board.",Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),"Left click to open a box or right click to flag it. You may toggle this by clicking on the button on top.",Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),"Clicking on an open box will open all surrounding boxes if all the mines of the original box have been flagged.",Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),"The hint button will let you know if you've wrongly flagged any box, and if there's any unopened box that can be deduced to be either safe or have a mine."]}),Object(O.jsx)("button",{className:"info",onMouseOver:function(){return _(!0)},onMouseLeave:function(){return _(!1)},children:"\u24d8"})]})},p=o.a.memo(w);s.a.render(Object(O.jsx)(o.a.StrictMode,{children:Object(O.jsx)(p,{})}),document.getElementById("root"))},6:function(e,t,n){}},[[14,1,2]]]);
//# sourceMappingURL=main.4698866a.chunk.js.map