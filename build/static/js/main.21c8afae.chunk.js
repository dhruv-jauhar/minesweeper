(this["webpackJsonpcreate-react-app"]=this["webpackJsonpcreate-react-app"]||[]).push([[0],{14:function(t,e,n){"use strict";n.r(e);var a=n(1),o=n.n(a),r=n(7),s=n.n(r),i=(n(6),n(8)),c=n(2),l=function(t,e,n){for(var a=[-1,0,1],o=0,r=0;r<3;r++)for(var s=0;s<3;s++)t+a[r]>=0&&t+a[r]<n.board.length&&e+a[s]>=0&&e+a[s]<n.board[0].length&&1===n.boardState[t+a[r]][e+a[s]]&&o++;if(o===n.board[t][e])for(r=0;r<3;r++)for(s=0;s<3;s++)t+a[r]>=0&&t+a[r]<n.board.length&&e+a[s]>=0&&e+a[s]<n.board[0].length&&0===n.boardState[t+a[r]][e+a[s]]&&d(t+a[r],e+a[s],n)},d=function(t,e,n){var a=n.boardState;a[t][e]=2,0===n.board[t][e]&&l(t,e,n);var o=n.hintState;o[t][e]=0,n.setHintState(o),"X"===n.board[t][e]&&function(t){t.setMessage("You lose!"),t.setRunTime(!1);for(var e=t.boardState,n=0;n<t.board.length;n++)for(var a=0;a<t.board[0].length;a++)"X"===t.board[n][a]&&(e[n][a]=2);t.setBoardState(e)}(n),n.setBoardState(a);for(var r=0,s=0;s<n.board.length;s++)for(var i=0;i<n.board[0].length;i++)2===a[s][i]&&r++;r===n.board.length*n.board[0].length-n.mines&&(n.setMessage("You won!\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0Grid: ".concat(n.board.length,"x").concat(n.board.length,"\xa0\xa0\xa0\xa0\xa0\xa0Mines: ").concat(n.mines,"\xa0\xa0\xa0\xa0\xa0\xa0Time: ").concat(n.time.toFixed(1),"s\xa0\xa0\xa0\xa0\xa0\xa0Hints Used: ").concat(n.hintCount)),n.setRunTime(!1))},u=function(t,e,n){var a=n.boardState;if(0===a[t][e]){if(n.flagCount===n.mines)return;a[t][e]=1,n.setFlagCount(n.flagCount+1)}else a[t][e]=0,n.setFlagCount(n.flagCount-1);var o=n.hintState;o[t][e]=0,n.setHintState(o),n.setBoardState(a)},b=function(t,e,n,a){if(0!==a.boardState[e][n]||"l"!==t||!1!==a.runTime||0!==a.time){if(!a.message.length)switch(a.boardState[e][n]){case 0:"l"===t?d(e,n,a):u(e,n,a);break;case 1:u(e,n,a);break;case 2:l(e,n,a);break;default:return}}else f(e,n,a)},f=function(t,e,n){var a,o=n.mines,r=n.board[0].length,s=n.board.length;do{a=m([s,r]);for(var i=0;i<Math.min(o,r*s);i++){for(var c=Math.floor(Math.random()*s*r);"X"===a[c%s][Math.floor(c/s)]||Math.abs(c%s-t)<2&&Math.abs(Math.floor(c/s)-e)<2;)c=Math.floor(Math.random()*s*r);a[c%s][Math.floor(c/s)]="X"}for(i=0;i<s;i++)for(var l=0;l<r;l++)if("X"!==a[i][l])for(var d=[-1,0,1],u=0;u<3;u++)for(var b=0;b<3;b++)i+d[u]>=0&&i+d[u]<s&&l+d[b]>=0&&l+d[b]<r&&"X"===a[i+d[u]][l+d[b]]&&a[i][l]++}while(!g(t,e,n,a));var f=n.boardState;h(f,t,e,a),n.setBoardState(f),n.setBoard(a),n.setRunTime(!0)};function h(t,e,n,a){if(t[e][n]=2,0===a[e][n])for(var o=[-1,0,1],r=0;r<3;r++)for(var s=0;s<3;s++)e+o[r]>=0&&e+o[r]<a.length&&n+o[s]>=0&&n+o[s]<a[0].length&&0===t[e+o[r]][n+o[s]]&&h(t,e+o[r],n+o[s],a)}function g(t,e,n,a){var o=m([n.board.length,n.board[0].length]);for(h(o,t,e,a);;){var r=0;for(t=0;t<n.board.length;t++)for(e=0;e<n.board[0].length;e++)if(2===o[t][e]){for(var s=[-1,0,1],i=0,c=0,l=0;l<3;l++)for(var d=0;d<3;d++)t+s[l]>=0&&t+s[l]<n.board.length&&e+s[d]>=0&&e+s[d]<n.board[0].length&&(1===o[t+s[l]][e+s[d]]&&i++,0===o[t+s[l]][e+s[d]]&&c++);if(i===a[t][e])for(l=0;l<3;l++)for(d=0;d<3;d++)t+s[l]>=0&&t+s[l]<n.board.length&&e+s[d]>=0&&e+s[d]<n.board[0].length&&0===o[t+s[l]][e+s[d]]&&(o[t+s[l]][e+s[d]]=2,r=1);if(c===a[t][e]-i&&c>0)for(l=0;l<3;l++)for(d=0;d<3;d++)t+s[l]>=0&&t+s[l]<n.board.length&&e+s[d]>=0&&e+s[d]<n.board[0].length&&0===o[t+s[l]][e+s[d]]&&(o[t+s[l]][e+s[d]]=1,r=1)}var u=0;for(t=0;t<n.board.length;t++)for(e=0;e<n.board[0].length;e++)1===o[t][e]&&u++;if(u===n.mines&&0===n.message.length)for(t=0;t<n.board.length;t++)for(e=0;e<n.board[0].length;e++)0===o[t][e]&&(o[t][e]=2,r=1);if(0===r)break}for(var b=0,f=0;f<n.board.length;f++)for(var g=0;g<n.board[0].length;g++)2===o[f][g]&&b++;return b===n.board.length*n.board[0].length-n.mines}function m(t){for(var e=[],n=0;n<t[0];++n)e.push(1===t.length?0:m(t.slice(1)));return e}function j(t,e,n){t=t||n.rows||10,e=e||n.cols||10,n.setBoard(m([e,t])),n.setBoardState(m([e,t])),n.setHintState(m([e,t])),n.setMessage(""),n.setFlagCount(0),n.setRunTime(!1),n.setHintCount(0),setTimeout((function(){return n.setTime(0)}),150)}function S(t){if(0!==t.time){for(var e=0,n=t.hintState,a=0;a<t.board.length;a++)for(var o=0;o<t.board[0].length;o++)1===t.boardState[a][o]&&"X"!=t.board[a][o]&&(n[a][o]=2,e=1);if(!e){for(var r=0;r<t.board.length;r++)for(var s=0;s<t.board[0].length;s++)if(2===t.boardState[r][s]){for(var i=[-1,0,1],c=0,l=0,d=0;d<3;d++)for(var u=0;u<3;u++)r+i[d]>=0&&r+i[d]<t.board.length&&s+i[u]>=0&&s+i[u]<t.board[0].length&&(1===t.boardState[r+i[d]][s+i[u]]&&c++,0===t.boardState[r+i[d]][s+i[u]]&&l++);if(c===t.board[r][s])for(d=0;d<3;d++)for(u=0;u<3;u++)r+i[d]>=0&&r+i[d]<t.board.length&&s+i[u]>=0&&s+i[u]<t.board[0].length&&0===t.boardState[r+i[d]][s+i[u]]&&(n[r+i[d]][s+i[u]]=1);if(l===t.board[r][s]-c&&l>0)for(d=0;d<3;d++)for(u=0;u<3;u++)r+i[d]>=0&&r+i[d]<t.board.length&&s+i[u]>=0&&s+i[u]<t.board[0].length&&0===t.boardState[r+i[d]][s+i[u]]&&(n[r+i[d]][s+i[u]]=2)}var b=0;for(r=0;r<t.board.length;r++)for(s=0;s<t.board[0].length;s++)1===t.boardState[r][s]&&b++;if(b===t.mines&&0===t.message.length)for(r=0;r<t.board.length;r++)for(s=0;s<t.board[0].length;s++)0===t.boardState[r][s]&&(n[r][s]=1);t.setHintCount(t.hintCount+1),t.setHintState(n)}}}var v=n(0),O=o.a.memo((function(t){var e=o.a.useState(!0),n=Object(c.a)(e,2),a=n[0],r=n[1],s=function(e,n,a){t.setRows(e),t.setCols(n),t.setMines(a),j(e,n,t)};return Object(v.jsxs)("div",{className:"settings",children:[!!t.board.length&&Object(v.jsx)("button",{onClick:function(){return t.setShowNewGameSettings(!1)},children:"Back"}),Object(v.jsx)("button",{onClick:function(){return r(!a)},children:a?"Presets":"Custom"}),a?Object(v.jsxs)(o.a.Fragment,{children:[Object(v.jsx)("input",{type:"text",autoFocus:!0,id:"rowno",placeholder:"Enter rows",autoComplete:"off"}),Object(v.jsx)("input",{type:"text",id:"colno",placeholder:"Enter columns",autoComplete:"off"}),Object(v.jsx)("input",{type:"text",id:"bombno",placeholder:"Enter mines",autoComplete:"off"}),Object(v.jsx)("button",{onClick:function(){var e=document.getElementById("rowno").value,n=document.getElementById("bombno").value,a=document.getElementById("colno").value;e>24?window.alert("Please limit rows to 24"):a>32?window.alert("Please limit columns to 32"):2.5*n>e*a?window.alert("Please limit mines to 40% of the board"):(e=e.length?parseInt(e):0,a=a.length?parseInt(a):0,n=n.length?parseInt(n):0,t.setRows(e||t.rows||10),t.setMines(n||t.mines||15),t.setCols(a||t.cols||10),j(e,a,t),t.setShowNewGameSettings(!1))},children:"Start"})]}):Object(v.jsxs)(o.a.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){r(!0),t.setShowNewGameSettings(!1),s(8,8,10)},children:"Easy - 8x8, 10"}),Object(v.jsx)("button",{onClick:function(){r(!a),t.setShowNewGameSettings(!1),s(16,16,40)},children:"Medium - 16x16, 40"}),Object(v.jsx)("button",{onClick:function(){r(!a),t.setShowNewGameSettings(!1),s(30,16,99)},children:"Hard - 30x16, 99"}),Object(v.jsx)("button",{onClick:function(){r(!a),t.setShowNewGameSettings(!1),s(30,24,200)},children:"Expert - 30x24, 200"})]})]})})),C=o.a.memo((function(t){return Object(v.jsxs)("div",{className:"settings",children:[Object(v.jsx)("button",{onClick:function(){return j(t.rows,t.cols,t)},children:"Reset - ".concat(t.rows,"x").concat(t.cols)}),t.message.length?Object(v.jsx)("div",{className:"result",children:t.message}):Object(v.jsxs)(o.a.Fragment,{children:[Object(v.jsxs)("button",{onClick:function(){return t.setDoesClickOpen(!t.doesClickOpen)},children:[Object(v.jsx)("div",{className:"".concat(t.doesClickOpen),children:"\ud83d\udc80"}),Object(v.jsx)("div",{className:"".concat(!t.doesClickOpen),children:"\ud83d\udea9"})]}),Object(v.jsx)("div",{className:"count",children:Object(v.jsxs)(v.Fragment,{children:["\ud83d\udea9\u2007\u2007",t.flagCount,"\u2007/\u2007",t.mines]})}),Object(v.jsxs)("div",{className:"count",children:["\u23f1\u2007\u2007\u2007\u2007\u2007",t.time.toFixed(1)]}),Object(v.jsx)("button",{onClick:function(){return S(t)},children:"Hint"})]}),Object(v.jsx)("button",{onClick:function(){return t.setShowNewGameSettings(!0)},children:"New Game"})]})})),x=o.a.memo((function(t){return o.a.useEffect((function(){return Object(i.a)(document.querySelectorAll(".tile")).forEach((function(t){return t.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1}),!1)}))})),Object(v.jsx)("div",{className:"gameboard",children:t.board.map((function(e,n){return Object(v.jsx)("div",{className:"row",children:e.map((function(e,a){return Object(v.jsx)("div",{className:2===t.boardState[n][a]?"a".concat(t.board[n][a]):0===t.hintState[n][a]?"tile":"b".concat(t.hintState[n][a]),onClick:function(){return b(t.doesClickOpen?"l":"r",n,a,t)},onContextMenu:function(){return b(t.doesClickOpen?"r":"l",n,a,t),!1},children:2===t.boardState[n][a]?"X"===e?Object(v.jsx)(v.Fragment,{children:"\ud83d\udc80"}):e:1===t.boardState[n][a]&&Object(v.jsx)(v.Fragment,{children:"\ud83d\udea9"})},a)}))},n)}))})})),w=function(){var t=o.a.useState(0),e=Object(c.a)(t,2),n=e[0],a=e[1],r=o.a.useState(0),s=Object(c.a)(r,2),i=s[0],l=s[1],d=o.a.useState(0),u=Object(c.a)(d,2),b=u[0],f=u[1],h=o.a.useState(0),g=Object(c.a)(h,2),m=g[0],j=g[1],S=o.a.useState([]),w=Object(c.a)(S,2),p=w[0],k=w[1],M=o.a.useState(!1),N=Object(c.a)(M,2),B=N[0],E=N[1],F=o.a.useState(""),H=Object(c.a)(F,2),T=H[0],G=H[1],R=o.a.useState(0),y=Object(c.a)(R,2),I=y[0],X=y[1],P=o.a.useState([]),D=Object(c.a)(P,2),J=D[0],L=D[1],Y=o.a.useState(0),q=Object(c.a)(Y,2),A=q[0],U=q[1],z=o.a.useState([]),K=Object(c.a)(z,2),Q=K[0],V=K[1],W=o.a.useState(!0),Z=Object(c.a)(W,2),$=Z[0],_=Z[1],tt=o.a.useState(!0),et=Object(c.a)(tt,2),nt=et[0],at=et[1];return document.addEventListener("visibilitychange",(function(){document.hidden?E(!1):E(!!(n>0&&0===T.length))})),o.a.useEffect((function(){var t=null;return B?t=setInterval((function(){a((function(t){return t+.1}))}),100):clearInterval(t),function(){clearInterval(t)}}),[B]),o.a.useEffect((function(){T.length&&at(!1)}),[T]),Object(v.jsxs)("div",{className:"screen",children:[nt?Object(v.jsx)(O,{rows:i,cols:b,mines:m,board:p,setRows:l,setCols:f,setTime:a,setMines:j,hintCount:A,setBoard:k,setRunTime:E,setMessage:G,setFlagCount:X,setHintCount:U,setHintState:L,setBoardState:V,setShowNewGameSettings:at}):Object(v.jsx)(C,{rows:i,cols:b,time:n,mines:m,board:p,setTime:a,message:T,setBoard:k,flagCount:I,hintState:J,boardState:Q,setRunTime:E,hintCount:A,setMessage:G,setFlagCount:X,doesClickOpen:$,setHintCount:U,setHintState:L,setBoardState:V,setDoesClickOpen:_,setShowNewGameSettings:at}),Object(v.jsx)(x,{time:n,mines:m,board:p,runTime:B,message:T,hintCount:A,setBoard:k,flagCount:I,hintState:J,setRunTime:E,boardState:Q,setMessage:G,setHintCount:U,setFlagCount:X,setHintState:L,setBoardState:V,doesClickOpen:$})]})},p=o.a.memo(w);s.a.render(Object(v.jsx)(o.a.StrictMode,{children:Object(v.jsx)(p,{})}),document.getElementById("root"))},6:function(t,e,n){}},[[14,1,2]]]);
//# sourceMappingURL=main.21c8afae.chunk.js.map